{"version":3,"sources":["../src/query_ctrl.js"],"names":["QueryCtrl","vm","DefaultDatasourceQueryCtrl","$scope","$injector","scope","datasource","metadata","url","uri","parameters","getNamespaces","namespaces","namespace","getAliases","panel","updateMetadata","target","rawQuery","panelCtrl","refresh","targets","segments","item","undefined","push","parameter","filter","onChangeInternal","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,e,kBAAAA,S;;;;;;;;;;;;;;;;;;;;;AAEJC,Q;;4CACSC,0B;;;AAEX,4CAAYC,MAAZ,EAAoBC,SAApB,EAA+B;AAAA;;AAAA,8JACrBD,MADqB,EACbC,SADa;;AAE3BH;AACAA,aAAGI,KAAH,GAAWF,MAAX;AAH2B;AAI9B;;;;uCAEY;AACX,mBAAOF,GAAGK,UAAH,CAAcC,QAArB;AACD;;;qCAEUC,G,EAAKC,G,EAAK;AACnB,mBAAOR,GAAGK,UAAH,CAAcC,QAAd,CAAuBG,UAA9B;AACD;;;0CAEc;AACb,mBAAOT,GAAGK,UAAH,CAAcK,aAAd,EAAP;AACD;;;qCAEUC,U,EAAYC,S,EAAU;AAC/B,mBAAOZ,GAAGK,UAAH,CAAcQ,UAAd,CAAyBF,UAAzB,EAAqCC,SAArC,CAAP;AACD;;;yCAEcE,K,EAAOP,G,EAAKC,G,EAAI;AAC3B,gBAAGD,OAAO,IAAP,IAAeC,OAAK,IAAvB,EACIR,GAAGK,UAAH,CAAcU,cAAd,CAA6BD,KAA7B,EAAoCP,GAApC,EAAyCC,GAAzC;AACP;;;6CAEkB;AACjBR,eAAGgB,MAAH,CAAUC,QAAV,GAAqB,CAACjB,GAAGgB,MAAH,CAAUC,QAAhC;AACD;;;6CAEkB;AACjB,iBAAKC,SAAL,CAAeC,OAAf;AACD;;;wCAEaH,M,EAAO;AACnBA,mBAAOI,OAAP,GAAiBpB,GAAGK,UAAH,CAAcgB,QAA/B;AAED;;;uCAEYL,M,EAAQM,I,EAAM;AACvB,gBAAIN,OAAOI,OAAP,IAAkBG,SAAtB,EACIP,OAAOI,OAAP,GAAiB,EAAjB;;AAEJJ,mBAAOI,OAAP,CAAeI,IAAf,CAAoBF,IAApB;AACH;;;0CAEeN,M,EAAQS,S,EAAU;AAChCT,mBAAOI,OAAP,GAAiBJ,OAAOI,OAAP,CAAeM,MAAf,CAAuB;AAAA,qBAAQJ,SAASG,SAAjB;AAAA,aAAvB,CAAjB;AACA,iBAAKE,gBAAL;AACD;;;;QApD6C5B,S;;;;AAwDhDE,iCAA2B2B,WAA3B,GAAyC,4BAAzC","file":"query_ctrl.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\nimport './css/query-editor.css!'\nlet vm;\nexport class DefaultDatasourceQueryCtrl extends QueryCtrl {\n  \n  constructor($scope, $injector) {\n      super($scope, $injector);\n      vm = this;\n      vm.scope = $scope;\n  }\n\n  getOptions() {\n    return vm.datasource.metadata;\n  }\n\n  getOptions(url, uri) {\n    return vm.datasource.metadata.parameters;\n  }\n\n  getNamespaces(){\n    return vm.datasource.getNamespaces();\n  }\n\n  getAliases(namespaces, namespace){\n    return vm.datasource.getAliases(namespaces, namespace);\n  }\n\n  updateMetadata(panel, url, uri){\n      if(url != null && uri!=null)\n          vm.datasource.updateMetadata(panel, url, uri);\n  }\n\n  toggleEditorMode() {\n    vm.target.rawQuery = !vm.target.rawQuery;\n  }\n\n  onChangeInternal() {\n    this.panelCtrl.refresh();\n  }\n\n  getParameters(target){\n    target.targets = vm.datasource.segments;\n\n  }\n\n  addParameter(target, item) {\n      if (target.targets == undefined)\n          target.targets = [];\n\n      target.targets.push(item);\n  }\n\n  removeParameter(target, parameter){\n    target.targets = target.targets.filter( item => item !== parameter);\n    this.onChangeInternal();\n  }\n\n}\n\nDefaultDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';\n\n"]}