{"version":3,"sources":["../../src/query_ctrl.js"],"names":["vm","DefaultDatasourceQueryCtrl","$scope","$injector","scope","datasource","metadata","url","uri","parameters","getNamespaces","namespaces","namespace","getAliases","panel","updateMetadata","target","rawQuery","panelCtrl","refresh","targets","segments","item","undefined","push","parameter","filter","onChangeInternal","templateUrl"],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;;;AACA,IAAIA,WAAJ;;IACaC,0B,WAAAA,0B;;;AAEX,sCAAYC,MAAZ,EAAoBC,SAApB,EAA+B;AAAA;;AAAA,wJACrBD,MADqB,EACbC,SADa;;AAE3BH;AACAA,OAAGI,KAAH,GAAWF,MAAX;AAH2B;AAI9B;;;;iCAEY;AACX,aAAOF,GAAGK,UAAH,CAAcC,QAArB;AACD;;;+BAEUC,G,EAAKC,G,EAAK;AACnB,aAAOR,GAAGK,UAAH,CAAcC,QAAd,CAAuBG,UAA9B;AACD;;;oCAEc;AACb,aAAOT,GAAGK,UAAH,CAAcK,aAAd,EAAP;AACD;;;+BAEUC,U,EAAYC,S,EAAU;AAC/B,aAAOZ,GAAGK,UAAH,CAAcQ,UAAd,CAAyBF,UAAzB,EAAqCC,SAArC,CAAP;AACD;;;mCAEcE,K,EAAOP,G,EAAKC,G,EAAI;AAC3B,UAAGD,OAAO,IAAP,IAAeC,OAAK,IAAvB,EACIR,GAAGK,UAAH,CAAcU,cAAd,CAA6BD,KAA7B,EAAoCP,GAApC,EAAyCC,GAAzC;AACP;;;uCAEkB;AACjBR,SAAGgB,MAAH,CAAUC,QAAV,GAAqB,CAACjB,GAAGgB,MAAH,CAAUC,QAAhC;AACD;;;uCAEkB;AACjB,WAAKC,SAAL,CAAeC,OAAf;AACD;;;kCAEaH,M,EAAO;AACnBA,aAAOI,OAAP,GAAiBpB,GAAGK,UAAH,CAAcgB,QAA/B;AAED;;;iCAEYL,M,EAAQM,I,EAAM;AACvB,UAAIN,OAAOI,OAAP,IAAkBG,SAAtB,EACIP,OAAOI,OAAP,GAAiB,EAAjB;;AAEJJ,aAAOI,OAAP,CAAeI,IAAf,CAAoBF,IAApB;AACH;;;oCAEeN,M,EAAQS,S,EAAU;AAChCT,aAAOI,OAAP,GAAiBJ,OAAOI,OAAP,CAAeM,MAAf,CAAuB;AAAA,eAAQJ,SAASG,SAAjB;AAAA,OAAvB,CAAjB;AACA,WAAKE,gBAAL;AACD;;;;;;AAIH1B,2BAA2B2B,WAA3B,GAAyC,4BAAzC","file":"query_ctrl.js","sourcesContent":["import {QueryCtrl} from 'app/plugins/sdk';\nimport './css/query-editor.css!'\nlet vm;\nexport class DefaultDatasourceQueryCtrl extends QueryCtrl {\n  \n  constructor($scope, $injector) {\n      super($scope, $injector);\n      vm = this;\n      vm.scope = $scope;\n  }\n\n  getOptions() {\n    return vm.datasource.metadata;\n  }\n\n  getOptions(url, uri) {\n    return vm.datasource.metadata.parameters;\n  }\n\n  getNamespaces(){\n    return vm.datasource.getNamespaces();\n  }\n\n  getAliases(namespaces, namespace){\n    return vm.datasource.getAliases(namespaces, namespace);\n  }\n\n  updateMetadata(panel, url, uri){\n      if(url != null && uri!=null)\n          vm.datasource.updateMetadata(panel, url, uri);\n  }\n\n  toggleEditorMode() {\n    vm.target.rawQuery = !vm.target.rawQuery;\n  }\n\n  onChangeInternal() {\n    this.panelCtrl.refresh();\n  }\n\n  getParameters(target){\n    target.targets = vm.datasource.segments;\n\n  }\n\n  addParameter(target, item) {\n      if (target.targets == undefined)\n          target.targets = [];\n\n      target.targets.push(item);\n  }\n\n  removeParameter(target, parameter){\n    target.targets = target.targets.filter( item => item !== parameter);\n    this.onChangeInternal();\n  }\n\n}\n\nDefaultDatasourceQueryCtrl.templateUrl = 'partials/query.editor.html';\n\n"]}