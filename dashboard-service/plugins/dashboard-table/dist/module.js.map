{"version":3,"sources":["../src/module.js"],"names":["_","BasePanelCtrl","tablePanelEditor","columnOptionsTab","TableRenderer","transformDataToTable","FinraTableCtrl","$scope","$injector","$rootScope","$document","$compile","panelDefaults","targets","pageSize","pageIndex","showHeader","styles","type","pattern","alias","dateFormat","unit","decimals","colors","colorMode","thresholds","columns","scroll","fontSize","sort","col","desc","dataspecType","defaults","panel","legend","xaxis","yaxis","events","on","onDataReceived","bind","onDataError","onInitEditMode","dashAlerts","list","organizationContact","addEditorTab","series","render","dataList","dataRaw","refreshTable","pageNumber","scopedVars","text","value","refreshTableData","refresh","rows","table","renderer","dashboard","isTimezoneUtc","$sanitize","templateSrv","colIndex","sorting","title","scope","elem","attrs","ctrl","data","pageCount","getTableHeight","panelHeight","height","appendTableRows","tbodyElem","setTable","empty","html","switchPage","e","el","$","currentTarget","parseInt","renderPanel","appendPaginationControls","footerElem","clearAlerts","undefined","length","Math","ceil","items","error","push","lowerBound","upperBound","expectedRows","receivedRows","page","startPage","max","endPage","min","paginationList","buildPaginationButton","logic","labelText","goToPage","activeClass","append","i","disabled","pageLinkElem","panelElem","parents","rootElem","find","css","addClass","tooltip","selector","unbindDestroy","$on","off","renderData","renderingCompleted","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAOA,a;;AACCC,yB,mBAAAA,a;;AACAC,4B,WAAAA,gB;;AACAC,4B,mBAAAA,gB;;AACAC,yB,aAAAA,a;;AACAC,gC,iBAAAA,oB;;;;;;;;;;;;;;;;;;;;;2DAGKC,c;;;AACT,wCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,UAA/B,EAA2CC,SAA3C,EAAsDC,QAAtD,EAAgE;AAAA;;AAAA,gJACtDJ,MADsD,EAC9CC,SAD8C;;AAE5D,0BAAKC,UAAL,GAAkBA,UAAlB;AACA,0BAAKC,SAAL,GAAiBA,SAAjB;AACA,0BAAKC,QAAL,GAAgBA,QAAhB;;AAEA,wBAAIC,gBAAgB;AAChBC,iCAAS,CAAC,EAAD,CADO;AAEhBC,kCAAU,IAFM;AAGhBC,mCAAU,CAHM;AAIhBC,oCAAY,IAJI;AAKhBC,gCAAQ,CACJ;AACIC,kCAAM,MADV;AAEIC,qCAAS,MAFb;AAGIC,mCAAO,MAHX;AAIIC,wCAAY;AAJhB,yBADI,EAOJ;AACIC,kCAAM,OADV;AAEIJ,kCAAM,QAFV;AAGIE,mCAAO,EAHX;AAIIG,sCAAU,CAJd;AAKIC,oCAAQ,CAAC,wBAAD,EAA2B,0BAA3B,EAAuD,yBAAvD,CALZ;AAMIC,uCAAW,IANf;AAOIN,qCAAS,MAPb;AAQIO,wCAAY;AARhB,yBAPI,CALQ;AAuBhBC,iCAAS,EAvBO;AAwBhBC,gCAAQ,IAxBQ;AAyBhBC,kCAAU,MAzBM;AA0BhBC,8BAAM,EAACC,KAAK,IAAN,EAAYC,MAAM,IAAlB,EA1BU;AA2BhBC,sCAAc;AA3BE,qBAApB;AA6BA,0BAAKlB,SAAL,GAAe,CAAf;AACAf,sBAAEkC,QAAF,CAAW,MAAKC,KAAhB,EAAuBvB,aAAvB;AACAZ,sBAAEkC,QAAF,CAAW,MAAKC,KAAL,CAAWC,MAAtB,EAA8BxB,cAAcwB,MAA5C;AACApC,sBAAEkC,QAAF,CAAW,MAAKC,KAAL,CAAWE,KAAtB,EAA6BzB,cAAcyB,KAA3C;AACArC,sBAAEkC,QAAF,CAAW,MAAKC,KAAL,CAAWG,KAAtB,EAA6B1B,cAAc0B,KAA3C;;AAEA,0BAAKC,MAAL,CAAYC,EAAZ,CAAe,eAAf,EAAgC,MAAKC,cAAL,CAAoBC,IAApB,OAAhC;AACA,0BAAKH,MAAL,CAAYC,EAAZ,CAAe,YAAf,EAA6B,MAAKG,WAAL,CAAiBD,IAAjB,OAA7B;AACA,0BAAKH,MAAL,CAAYC,EAAZ,CAAe,oBAAf,EAAqC,MAAKC,cAAL,CAAoBC,IAApB,OAArC;AACA,0BAAKH,MAAL,CAAYC,EAAZ,CAAe,gBAAf,EAAiC,MAAKI,cAAL,CAAoBF,IAApB,OAAjC;AACA,0BAAKG,UAAL,GAAkB,EAAlB;AACA,0BAAKA,UAAL,CAAgBC,IAAhB,GAAuB,EAAvB;AACA,0BAAKC,mBAAL,GAA2B,WAA3B;AA/C4D;AAgD/D;;;;qDAEgB;AACb,6BAAKC,YAAL,CAAkB,SAAlB,EAA6B9C,gBAA7B,EAA+C,CAA/C;AACA,6BAAK8C,YAAL,CAAkB,eAAlB,EAAmC7C,gBAAnC,EAAqD,CAArD;AACH;;;kDAGa;AACV,6BAAK8C,MAAL,GAAc,EAAd;AACA,6BAAKC,MAAL;AACH;;;mDAGcC,Q,EAAU;AACrB,6BAAKC,OAAL,GAAeD,QAAf;AACA,6BAAKE,YAAL;AACH;;;4CAEOC,U,EAAW;AACf,4BAAG,CAAC,KAAKnB,KAAL,CAAWoB,UAAf,EAA2B;AACvB,iCAAKpB,KAAL,CAAWoB,UAAX,GAAwB,EAAxB;AACH;AACD,6BAAKpB,KAAL,CAAWoB,UAAX,CAAsB,MAAtB,IAA+B;AAC3BC,kCAAM,MADqB;AAE3BC,mCAAOH,aAAW;AAFS,yBAA/B;AAIA,6BAAKI,gBAAL;AACH;;;uDAEiB;AACd;AACA;AACA;AACA,4BAAG,CAAC,KAAKvB,KAAL,CAAWoB,UAAf,EAA2B;AACvB,iCAAKpB,KAAL,CAAWoB,UAAX,GAAwB,EAAxB;AACH;;AAED,6BAAKpB,KAAL,CAAWoB,UAAX,CAAsB,aAAtB,IAAsC;AAClCC,kCAAM,aAD4B;AAElCC,mCAAO,KAAKtB,KAAL,CAAWrB;AAFgB,yBAAtC;AAIA,4BAAG,CAAC,KAAKqB,KAAL,CAAWoB,UAAX,CAAsB,MAAtB,CAAJ,EAAkC;AAC9B,iCAAKpB,KAAL,CAAWoB,UAAX,CAAsB,MAAtB,IAA+B,EAACC,MAAM,MAAP,EAA/B;AACH;AACD,6BAAKrB,KAAL,CAAWoB,UAAX,CAAsB,MAAtB,IAA+B;AAC3BE,mCAAO,KAAKtB,KAAL,CAAWoB,UAAX,CAAsB,MAAtB,EAA8BE,KAA9B,GAAsC,KAAKtB,KAAL,CAAWoB,UAAX,CAAsB,MAAtB,EAA8BE,KAApE,GAA4E;AADxD,yBAA/B;AAGA,6BAAKE,OAAL;AACH;;;mDAEa;AACV,4BAAG,KAAKP,OAAL,IAAgB,KAAKA,OAAL,CAAazB,OAA7B,IAAwC,KAAKyB,OAAL,CAAaQ,IAAxD,EAA8D;AAC1D,iCAAKC,KAAL,GAAaxD,qBAAqB,KAAK+C,OAA1B,EAAmC,KAAKjB,KAAxC,CAAb;AACA,iCAAK0B,KAAL,CAAW/B,IAAX,CAAgB,KAAKK,KAAL,CAAWL,IAA3B;AACA,iCAAKgC,QAAL,GAAgB,IAAI1D,aAAJ,CAAkB,KAAK+B,KAAvB,EAA8B,KAAK0B,KAAnC,EAA0C,KAAKE,SAAL,CAAeC,aAAf,EAA1C,EAA0E,KAAKC,SAA/E,EAA0F,KAAKC,WAA/F,CAAhB;AACH;AACD,6BAAKhB,MAAL,CAAY,KAAKW,KAAjB;AACH;;;qDAEgB9B,G,EAAKoC,Q,EAAU;AAC5B;AACA,4BAAI,KAAKN,KAAL,CAAWlC,OAAX,CAAmB,KAAKQ,KAAL,CAAWL,IAAX,CAAgBC,GAAnC,CAAJ,EAA6C;AACzC,iCAAK8B,KAAL,CAAWlC,OAAX,CAAmB,KAAKQ,KAAL,CAAWL,IAAX,CAAgBC,GAAnC,EAAwCD,IAAxC,GAA+C,KAA/C;AACAC,gCAAID,IAAJ,GAAW,KAAX;AACH;;AAED,4BAAI,KAAKK,KAAL,CAAWL,IAAX,CAAgBC,GAAhB,KAAwBoC,QAA5B,EAAsC;AAClC,gCAAI,CAAC,KAAKhC,KAAL,CAAWL,IAAX,CAAgBE,IAArB,EAA2B;AACvB,qCAAKG,KAAL,CAAWL,IAAX,CAAgBC,GAAhB,GAAsBoC,QAAtB;AACA,qCAAKhC,KAAL,CAAWL,IAAX,CAAgBE,IAAhB,GAAuB,IAAvB;AACAD,oCAAIC,IAAJ,GAAW,IAAX;AACAD,oCAAID,IAAJ,GAAW,IAAX;AACH,6BALD,MAKO;AACH,qCAAKK,KAAL,CAAWL,IAAX,CAAgBC,GAAhB,GAAsB,IAAtB;AACA,qCAAKI,KAAL,CAAWL,IAAX,CAAgBE,IAAhB,GAAuB,IAAvB;AACAD,oCAAID,IAAJ,GAAW,KAAX;AACAC,oCAAIC,IAAJ,GAAW,KAAX;AACH;AACJ,yBAZD,MAYO;AACH,iCAAKG,KAAL,CAAWL,IAAX,CAAgBC,GAAhB,GAAsBoC,QAAtB;AACA,iCAAKhC,KAAL,CAAWL,IAAX,CAAgBE,IAAhB,GAAuB,KAAvB;AACAD,gCAAID,IAAJ,GAAW,IAAX;AACAC,gCAAIC,IAAJ,GAAW,KAAX;AACH;;AAED,4BAAIoC,UAAU,MAAd;AACA,4BAAGrC,IAAID,IAAP,EAAa;AACT,gCAAG,CAACC,IAAIC,IAAR,EAAc;AACVoC,0CAAU,WAAV;AACH,6BAFD,MAEO;AACHA,0CAAU,YAAV;AACH;AACJ;;AAED,4BAAG,CAAC,KAAKjC,KAAL,CAAWoB,UAAf,EAA2B;AACvB,iCAAKpB,KAAL,CAAWoB,UAAX,GAAwB,EAAxB;AACH;;AAED,6BAAKpB,KAAL,CAAWoB,UAAX,CAAsB,aAAtB,IAAsC;AAClCC,kCAAM,aAD4B;AAElCC,mCAAO1B,IAAIsC;AAFuB,yBAAtC;;AAKA,6BAAKlC,KAAL,CAAWoB,UAAX,CAAsB,SAAtB,IAAkC;AAC9BC,kCAAM,SADwB;AAE9BC,mCAAOW;AAFuB,yBAAlC;;AAKA,6BAAKT,OAAL;AACH;;;kDAEa;AACV,6BAAKd,UAAL,CAAgBC,IAAhB,GAAuB,EAAvB;AACH;;;yCAEIwB,K,EAAOC,I,EAAMC,K,EAAOC,I,EAAM;AAC3B,4BAAIC,IAAJ;AACA,4BAAIvC,QAAQsC,KAAKtC,KAAjB;AACA,4BAAIwC,YAAY,CAAhB;;AAGA,iCAASC,cAAT,GAA0B;AACtB,gCAAIC,cAAcJ,KAAKK,MAAvB;;AAEA,gCAAIH,YAAY,CAAhB,EAAmB;AACfE,+CAAe,EAAf;AACH;;AAED,mCAAQA,cAAc,EAAf,GAAqB,IAA5B;AACH;;AAED,iCAASE,eAAT,CAAyBC,SAAzB,EAAoC;AAChCP,iCAAKX,QAAL,CAAcmB,QAAd,CAAuBP,IAAvB;AACAM,sCAAUE,KAAV;AACAF,sCAAUG,IAAV,CAAeV,KAAKX,QAAL,CAAcZ,MAAd,CAAqBuB,KAAK1D,SAA1B,CAAf;AACH;;AAED,iCAASqE,UAAT,CAAoBC,CAApB,EAAuB;AACnB,gCAAIC,KAAKC,EAAEF,EAAEG,aAAJ,CAAT;AACAf,iCAAK1D,SAAL,GAAkB0E,SAASH,GAAG9B,IAAH,EAAT,EAAoB,EAApB,IAAwB,CAA1C;AACAkC;AACH;;AAED,iCAASC,wBAAT,CAAkCC,UAAlC,EAA8C;AAC1CA,uCAAWV,KAAX;AACAT,iCAAKoB,WAAL;;AAEA,gCAAG,CAACpB,KAAKtC,KAAL,CAAWoB,UAAZ,IAA0B,CAACkB,KAAKtC,KAAL,CAAWoB,UAAX,CAAsB,MAAtB,CAA9B,EAA4D;AACxDkB,qCAAKf,gBAAL;AACH;;AAED,gCAAI5C,WAAY2D,KAAKtC,KAAL,CAAWrB,QAAX,IAAuBgF,SAAvB,IAAoCrB,KAAKtC,KAAL,CAAWrB,QAAX,GAAsB,CAA3D,GAAgE2D,KAAKrB,OAAL,CAAaQ,IAAb,CAAkBmC,MAAlF,GAA2FtB,KAAKtC,KAAL,CAAWrB,QAArH;AACA6D,wCAAYqB,KAAKC,IAAL,CAAUxB,KAAKrB,OAAL,CAAa8C,KAAb,GAAqBpF,QAA/B,CAAZ;;AAEA;AACA,gCAAK6D,cAAc,CAAd,IAAmBF,KAAKrB,OAAL,CAAa8C,KAAb,KAAuBzB,KAAKrB,OAAL,CAAaQ,IAAb,CAAkBmC,MAAjE,EAAyE;AACrE,oCAAII,QAAQ,0BAA0B1B,KAAKrB,OAAL,CAAa8C,KAAvC,GAA+C,sBAA/C,GAAwEzB,KAAKrB,OAAL,CAAaQ,IAAb,CAAkBmC,MAA1F,GAAmG,QAA/G;AACAtB,qCAAK5B,UAAL,CAAgBC,IAAhB,CAAqBsD,IAArB,CAA0B,EAAC,QAAQD,KAAT,EAA1B;AACH;;AAED,gCAAIxB,aAAa,CAAjB,EAAoB;AAChB;AACH;;AAEDL,kCAAM+B,UAAN,GAAmB5B,KAAK1D,SAAL,GAAiBD,QAAjB,GAA4B,CAA/C;AACAwD,kCAAMgC,UAAN,GAAmB7B,KAAK1D,SAAL,GAAiB,CAAjB,KAAuB4D,SAAvB,GAAmCL,MAAM+B,UAAN,GAAmBvF,QAAnB,GAA8B,CAAjE,GAAqEwD,MAAM+B,UAAN,GAAmBvF,QAAnB,GAA6B,CAArH;AACA,gCAAIyF,eAAe,CAAC9B,KAAK1D,SAAL,GAAiB,CAAlB,IAAuBD,QAA1C;AACA,gCAAI0F,eAAelC,MAAM+B,UAAN,GAAmB5B,KAAKrB,OAAL,CAAaQ,IAAb,CAAkBmC,MAArC,GAA8C,CAAjE;;AAEA;AACA,gCAAItB,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAA3B,KAAqCkB,SAArC,IAAkD6B,iBAAiBD,YAAvE,EAAqF;AACjF,oCAAIJ,SAAQ,eAAeI,YAAf,GAA8B,8BAA9B,GAA+DC,YAA/D,GAA8E,OAA1F;AACA/B,qCAAK5B,UAAL,CAAgBC,IAAhB,CAAqBsD,IAArB,CAA0B,EAAC,QAAQD,MAAT,EAA1B;AACH;;AAED;AACA,gCAAI1B,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAA3B,KAAsCkB,SAAtC,IACAF,KAAKrB,OAAL,CAAa8C,KAAb,GAAsB,CAACzB,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAA3B,GAAiC,CAAlC,IAAuC3C,QAA7D,KAA2E2D,KAAKrB,OAAL,CAAaQ,IAAb,CAAkBmC,MADjG,EACyG;AACrG,oCAAII,UAAQ,0BAA0B1B,KAAKrB,OAAL,CAAa8C,KAAb,GAAwB,CAACzB,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAA3B,GAAiC,CAAlC,IAAuC3C,QAAzF,IAAwG,qBAAxG,GAAgI2D,KAAKrB,OAAL,CAAaQ,IAAb,CAAkBmC,MAAlJ,GAA2J,OAAvK;AACAtB,qCAAK5B,UAAL,CAAgBC,IAAhB,CAAqBsD,IAArB,CAA0B,EAAC,QAAQD,OAAT,EAA1B;AACH;;AAED,gCAAIO,YAAYV,KAAKW,GAAL,CAASlC,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAA3B,GAAmC,CAA5C,EAA+C,CAA/C,CAAhB;AACA,gCAAImD,UAAUZ,KAAKa,GAAL,CAASlC,SAAT,EAAoB+B,YAAY,CAAhC,CAAd;AACA,gCAAII,iBAAiBvB,EAAE,WAAF,CAArB;;AAEA,gCAAIwB,wBAAwB,SAAxBA,qBAAwB,CAACC,KAAD,EAAQC,SAAR,EAAmBC,QAAnB,EAAgC;AACxD,oCAAIA,YAAYN,OAAhB,EAAyB;AACrB,2CAAOrB,EAAE,oCAAoCZ,YAAY,CAAhD,IAAqD,2CAArD,GAAmGwC,WAAnG,GAAiH,IAAjH,GAAwHF,SAAxH,GAAoI,YAAtI,CAAP;AACH,iCAFD,MAEM;AACF,2CAAO1B,EAAE,mCAAmC2B,QAAnC,GAA8C,2CAA9C,GAA4FC,WAA5F,GAA0G,IAA1G,GAAiHF,SAAjH,GAA6H,YAA/H,CAAP;AACH;AACJ,6BAND;;AAQA;AACAH,2CAAeM,MAAf,CAAsBL,sBAAsBtC,KAAK1D,SAAL,KAAmB,CAAzC,EAA4C,IAA5C,EAAkD,CAAlD,CAAtB;AACA+F,2CAAeM,MAAf,CAAsBL,sBAAsBtC,KAAK1D,SAAL,KAAmB,CAAzC,EAA4C,GAA5C,EAAkD0D,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAA3B,GAAiC,CAAnF,CAAtB;;AAEA,iCAAK,IAAI4D,IAAIX,SAAb,EAAwBW,IAAIT,OAA5B,EAAqCS,GAArC,EAA0C;AACtC,oCAAIF,cAAc,QAAlB;AACA,oCAAIG,WAAWD,MAAM5C,KAAK1D,SAAX,GAAuB,oBAAvB,GAA8C,EAA7D;AACA,oCAAIsG,MAAO5C,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAA3B,GAAmC,CAA9C,EAAkD;AAC9C,wCAAI8D,eAAehC,EAAE,mCAAmC8B,CAAnC,GAAuC,2CAAvC,GAAqF,IAArF,IAA6FA,IAAI,CAAjG,IAAsG,WAAxG,CAAnB;AACH,iCAFD,MAEO;AACH,wCAAIE,eAAehC,EAAE,mCAAmC8B,CAAnC,GAAuC,2CAAvC,GAAqFF,WAArF,GAAmG,IAAnG,IAA2GE,IAAI,CAA/G,IAAoH,WAAtH,CAAnB;AACH;AACDP,+CAAeM,MAAf,CAAsBG,YAAtB;AACH;;AAED;AACAT,2CAAeM,MAAf,CAAsBL,sBAAsBtC,KAAK1D,SAAL,KAAmB4D,YAAY,CAArD,EAAwD,GAAxD,EAA6DF,KAAKtC,KAAL,CAAWoB,UAAX,CAAsBkD,IAAtB,CAA2BhD,KAAxF,CAAtB;AACAqD,2CAAeM,MAAf,CAAsBL,sBAAsBtC,KAAK1D,SAAL,KAAmB4D,YAAY,CAArD,EAAwD,IAAxD,EAA8DA,YAAW,CAAzE,CAAtB;;AAEAF,iCAAK9D,QAAL,CAAciF,WAAWwB,MAAX,CAAkBN,cAAlB,CAAd,EAAiDxC,KAAjD;AACH;;AAED,iCAASoB,WAAT,GAAuB;AACnB,gCAAI8B,YAAYjD,KAAKkD,OAAL,CAAa,QAAb,CAAhB;AACA,gCAAIC,WAAWnD,KAAKoD,IAAL,CAAU,qBAAV,CAAf;AACA,gCAAI3C,YAAYT,KAAKoD,IAAL,CAAU,OAAV,CAAhB;AACA,gCAAI/B,aAAarB,KAAKoD,IAAL,CAAU,qBAAV,CAAjB;;AAEApD,iCAAKqD,GAAL,CAAS,EAAC,aAAazF,MAAMN,QAApB,EAAT;AACA2F,sCAAUK,QAAV,CAAmB,qBAAnB;;AAEA9C,4CAAgBC,SAAhB;AACAW,qDAAyBC,UAAzB;;AAEA8B,qCAASE,GAAT,CAAa,EAAC,cAAczF,MAAMP,MAAN,GAAegD,gBAAf,GAAkC,EAAjD,EAAb;AACH;;AAED;AACAL,6BAAKuD,OAAL,CAAa;AACTC,sCAAU;AADD,yBAAb;;AAIAxD,6BAAK/B,EAAL,CAAQ,OAAR,EAAiB,wBAAjB,EAA2C4C,UAA3C;;AAEA,4BAAI4C,gBAAgB1D,MAAM2D,GAAN,CAAU,UAAV,EAAsB,YAAW;AACjD1D,iCAAK2D,GAAL,CAAS,OAAT,EAAkB,wBAAlB;AACAF;AACH,yBAHmB,CAApB;;AAKAvD,6BAAKlC,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,UAAS2F,UAAT,EAAqB;AAC1CzD,mCAAOyD,cAAczD,IAArB;AACA,gCAAIA,IAAJ,EAAU;AACNgB;AACH;AACDjB,iCAAK2D,kBAAL;AACH,yBAND;AAOH;;;;cA5S+BnI,a;;;;AAiTpCK,2BAAe+H,WAAf,GAA6B,aAA7B;;iCAGI/H,c","file":"module.js","sourcesContent":["import _ from \"lodash\";\nimport {BasePanelCtrl} from \"./BasePanelCtrl\";\nimport {tablePanelEditor} from './editor';\nimport {columnOptionsTab} from './column_options';\nimport {TableRenderer} from './renderer';\nimport {transformDataToTable} from './transformers';\n\n\nexport class FinraTableCtrl extends BasePanelCtrl {\n    constructor($scope, $injector, $rootScope, $document, $compile) {\n        super($scope, $injector);\n        this.$rootScope = $rootScope;\n        this.$document = $document;\n        this.$compile = $compile;\n\n        var panelDefaults = {\n            targets: [{}],\n            pageSize: null,\n            pageIndex:0,\n            showHeader: true,\n            styles: [\n                {\n                    type: 'date',\n                    pattern: 'Time',\n                    alias: 'Time',\n                    dateFormat: 'YYYY-MM-DD HH:mm:ss',\n                },\n                {\n                    unit: 'short',\n                    type: 'number',\n                    alias: '',\n                    decimals: 2,\n                    colors: [\"rgba(245, 54, 54, 0.9)\", \"rgba(237, 129, 40, 0.89)\", \"rgba(50, 172, 45, 0.97)\"],\n                    colorMode: null,\n                    pattern: '/.*/',\n                    thresholds: [],\n                }\n            ],\n            columns: [],\n            scroll: true,\n            fontSize: '100%',\n            sort: {col: null, desc: null},\n            dataspecType: 'drilldown'\n        };\n        this.pageIndex=0;\n        _.defaults(this.panel, panelDefaults);\n        _.defaults(this.panel.legend, panelDefaults.legend);\n        _.defaults(this.panel.xaxis, panelDefaults.xaxis );\n        _.defaults(this.panel.yaxis, panelDefaults.yaxis);\n    \n        this.events.on('data-received', this.onDataReceived.bind(this));\n        this.events.on('data-error', this.onDataError.bind(this));\n        this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\n        this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n        this.dashAlerts = {};\n        this.dashAlerts.list = [];\n        this.organizationContact = \"API admin\";\n    }\n    \n    onInitEditMode() {\n        this.addEditorTab('Options', tablePanelEditor, 2);\n        this.addEditorTab('Column Styles', columnOptionsTab, 3);\n    }\n    \n    \n    onDataError() {\n        this.series = [];\n        this.render();\n    }\n    \n    \n    onDataReceived(dataList) {\n        this.dataRaw = dataList;\n        this.refreshTable();\n    }\n    \n    getPage(pageNumber){\n        if(!this.panel.scopedVars) {\n            this.panel.scopedVars = []\n        }\n        this.panel.scopedVars[\"page\"]= {\n            text: \"page\",\n            value: pageNumber+1\n        };\n        this.refreshTableData();\n    }\n    \n    refreshTableData(){\n        //This allows for the request to send along \n        // page and rows per page without altering the targets \n        // important since targets are the visible input fields\n        if(!this.panel.scopedVars) {\n            this.panel.scopedVars = []\n        }\n        \n        this.panel.scopedVars[\"rowsPerPage\"]= {\n            text: \"rowsPerPage\",\n            value: this.panel.pageSize\n        };\n        if(!this.panel.scopedVars[\"page\"]){\n            this.panel.scopedVars[\"page\"]= {text: \"page\"}\n        } \n        this.panel.scopedVars[\"page\"]= {\n            value: this.panel.scopedVars[\"page\"].value ? this.panel.scopedVars[\"page\"].value : 1\n        };\n        this.refresh();\n    }\n    \n    refreshTable(){\n        if(this.dataRaw && this.dataRaw.columns && this.dataRaw.rows) {\n            this.table = transformDataToTable(this.dataRaw, this.panel);\n            this.table.sort(this.panel.sort);\n            this.renderer = new TableRenderer(this.panel, this.table, this.dashboard.isTimezoneUtc(), this.$sanitize, this.templateSrv);\n        }\n        this.render(this.table);\n    }\n\n    toggleColumnSort(col, colIndex) {\n        // remove sort flag from current column\n        if (this.table.columns[this.panel.sort.col]) {\n            this.table.columns[this.panel.sort.col].sort = false;\n            col.sort = false;\n        }\n\n        if (this.panel.sort.col === colIndex) {\n            if (!this.panel.sort.desc) {\n                this.panel.sort.col = colIndex;\n                this.panel.sort.desc = true;\n                col.desc = true;\n                col.sort = true;\n            } else {\n                this.panel.sort.col = null;\n                this.panel.sort.desc = null;\n                col.sort = false;\n                col.desc = false;\n            }\n        } else {\n            this.panel.sort.col = colIndex;\n            this.panel.sort.desc = false;\n            col.sort = true;\n            col.desc = false;\n        }\n\n        let sorting = \"none\";\n        if(col.sort) {\n            if(!col.desc) {\n                sorting = \"ascending\";\n            } else {\n                sorting = \"descending\";\n            }\n        }\n\n        if(!this.panel.scopedVars) {\n            this.panel.scopedVars = []\n        }\n\n        this.panel.scopedVars[\"columnTitle\"]= {\n            text: \"columnTitle\",\n            value: col.title\n        };\n\n        this.panel.scopedVars[\"sorting\"]= {\n            text: \"sorting\",\n            value: sorting\n        };\n\n        this.refresh();\n    }\n\n    clearAlerts() {\n        this.dashAlerts.list = [];\n    }\n\n    link(scope, elem, attrs, ctrl) {\n        var data;\n        var panel = ctrl.panel;\n        var pageCount = 0;\n\n\n        function getTableHeight() {\n            var panelHeight = ctrl.height;\n\n            if (pageCount > 1) {\n                panelHeight -= 26;\n            }\n\n            return (panelHeight - 31) + 'px';\n        }\n\n        function appendTableRows(tbodyElem) {\n            ctrl.renderer.setTable(data);\n            tbodyElem.empty();\n            tbodyElem.html(ctrl.renderer.render(ctrl.pageIndex));\n        }\n\n        function switchPage(e) {\n            var el = $(e.currentTarget);\n            ctrl.pageIndex = (parseInt(el.text(), 10)-1);\n            renderPanel();\n        }\n\n        function appendPaginationControls(footerElem) {\n            footerElem.empty();\n            ctrl.clearAlerts();\n\n            if(!ctrl.panel.scopedVars || !ctrl.panel.scopedVars[\"page\"]){\n                ctrl.refreshTableData()\n            }\n\n            var pageSize = (ctrl.panel.pageSize == undefined || ctrl.panel.pageSize < 1) ? ctrl.dataRaw.rows.length : ctrl.panel.pageSize;\n            pageCount = Math.ceil(ctrl.dataRaw.items / pageSize );\n\n            //check declared total item equals actual returned items\n            if ( pageCount === 1 && ctrl.dataRaw.items !== ctrl.dataRaw.rows.length) {\n                let error = \"Expecting a total of \" + ctrl.dataRaw.items + \" items but received \" + ctrl.dataRaw.rows.length + \" items\";\n                ctrl.dashAlerts.list.push({\"text\": error});\n            }\n\n            if (pageCount <= 1) {\n                return;\n            }\n\n            scope.lowerBound = ctrl.pageIndex * pageSize + 1;\n            scope.upperBound = ctrl.pageIndex + 1 === pageCount ? scope.lowerBound + pageSize - 1 : scope.lowerBound + pageSize- 1;\n            let expectedRows = (ctrl.pageIndex + 1) * pageSize;\n            let receivedRows = scope.lowerBound + ctrl.dataRaw.rows.length - 1;\n\n            //check rows per page are equal to actual rows returned\n            if (ctrl.panel.scopedVars.page.value !== pageCount && receivedRows !== expectedRows) {\n                let error = \"Expecting \" + expectedRows + \" rows per page but received \" + receivedRows + \" rows\";\n                ctrl.dashAlerts.list.push({\"text\": error});\n            }\n\n            //calculate and check that last page does not contain more than required\n            if( ctrl.panel.scopedVars.page.value  === pageCount &&\n                ctrl.dataRaw.items - ((ctrl.panel.scopedVars.page.value-1) * pageSize) !== ctrl.dataRaw.rows.length) {\n                let error = \"Last page expecting \" + (ctrl.dataRaw.items  - ( (ctrl.panel.scopedVars.page.value-1) * pageSize ))  + \" rows but received \" + ctrl.dataRaw.rows.length + \" rows\";\n                ctrl.dashAlerts.list.push({\"text\": error});\n            }\n\n            var startPage = Math.max(ctrl.panel.scopedVars.page.value - 3, 0);\n            var endPage = Math.min(pageCount, startPage + 9);\n            var paginationList = $('<ul></ul>');\n\n            let buildPaginationButton = (logic, labelText, goToPage) => {\n                if( goToPage >= endPage) {\n                    return $('<li><a ng-click=\"ctrl.getPage(' + (pageCount - 1) + ')\" class=\"table-panel-page-link pointer \"' + activeClass + '> ' + labelText + ' </a></li>');\n                }else {\n                    return $('<li><a ng-click=\"ctrl.getPage(' + goToPage + ')\" class=\"table-panel-page-link pointer \"' + activeClass + '> ' + labelText + ' </a></li>');\n                }\n            };\n\n            //appending the go to first + the go back 10 pages handles\n            paginationList.append(buildPaginationButton(ctrl.pageIndex === 0, '<<', 0));\n            paginationList.append(buildPaginationButton(ctrl.pageIndex === 0, '<', (ctrl.panel.scopedVars.page.value-2)));\n            \n            for (var i = startPage; i < endPage; i++) {\n                var activeClass = 'active';\n                var disabled = i === ctrl.pageIndex ? 'ng-disabled=\"true\"' : '';\n                if( i !== (ctrl.panel.scopedVars.page.value - 1)) {\n                    var pageLinkElem = $('<li><a ng-click=\"ctrl.getPage(' + i + ')\"  class=\"table-panel-page-link pointer ' + '\">' + (i + 1) + '</a></li>');\n                } else {\n                    var pageLinkElem = $('<li><a ng-click=\"ctrl.getPage(' + i + ')\"  class=\"table-panel-page-link pointer ' + activeClass + '\">' + (i + 1) + '</a></li>');\n                }\n                paginationList.append(pageLinkElem);\n            }\n\n            //appending the skip 10 + the go to last page handles\n            paginationList.append(buildPaginationButton(ctrl.pageIndex === pageCount - 1, '>', ctrl.panel.scopedVars.page.value ));\n            paginationList.append(buildPaginationButton(ctrl.pageIndex === pageCount - 1, '>>', pageCount -1));\n\n            ctrl.$compile(footerElem.append(paginationList))(scope);\n        }\n\n        function renderPanel() {\n            var panelElem = elem.parents('.panel');\n            var rootElem = elem.find('.table-panel-scroll');\n            var tbodyElem = elem.find('tbody');\n            var footerElem = elem.find('.table-panel-footer');\n\n            elem.css({'font-size': panel.fontSize});\n            panelElem.addClass('table-panel-wrapper');\n\n            appendTableRows(tbodyElem);\n            appendPaginationControls(footerElem);\n\n            rootElem.css({'max-height': panel.scroll ? getTableHeight() : '' });\n        }\n\n        // hook up link tooltips\n        elem.tooltip({\n            selector: '[data-link-tooltip]'\n        });\n\n        elem.on('click', '.table-panel-page-link', switchPage);\n\n        var unbindDestroy = scope.$on('$destroy', function() {\n            elem.off('click', '.table-panel-page-link');\n            unbindDestroy();\n        });\n\n        ctrl.events.on('render', function(renderData) {\n            data = renderData || data;\n            if (data) {\n                renderPanel();\n            }\n            ctrl.renderingCompleted();\n        });\n    }\n}\n\n\n\nFinraTableCtrl.templateUrl = 'module.html';\n\nexport {\n    FinraTableCtrl as PanelCtrl\n};\n\n"]}