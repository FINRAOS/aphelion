{"version":3,"sources":["../src/editor.js"],"names":["tablePanelEditor","$q","uiSegmentSrv","restrict","scope","templateUrl","controller","TablePanelEditorCtrl","_","$","moment","angular","kbn","$scope","editor","panelCtrl","ctrl","panel","fontSizes","addColumnSegment","newPlusButton","dataRaw","when","columns","segments","map","c","newSegment","value","text","column","find","push","render","plusButton","html","refreshTableData","refreshTable","without"],"mappings":";;;;;;;;;;;;;AA+DA;AACO,WAASA,gBAAT,CAA0BC,EAA1B,EAA8BC,YAA9B,EAA4C;AACjD;;AACA,WAAO;AACLC,gBAAU,GADL;AAELC,aAAO,IAFF;AAGLC,mBAAa,wCAHR;AAILC,kBAAYC;AAJP,KAAP;AAMD;;8BAReP,gB;;;;AAhETQ,O;;AACAC,O;;AACAC,Y;;AACAC,a;;AACAC,S;;;;;;;;;;;;;;;;;;;;;sCAGML,oB;;AAGX;AACA,sCAAYM,MAAZ,EAAoBZ,EAApB,EAAwBC,YAAxB,EAAsC;AAAA;;AACpCW,iBAAOC,MAAP,GAAgB,IAAhB;AACA,eAAKC,SAAL,GAAiBF,OAAOG,IAAxB;AACA,eAAKC,KAAL,GAAa,KAAKF,SAAL,CAAeE,KAA5B;AACA,eAAKC,SAAL,GAAiB,CAAC,KAAD,EAAQ,KAAR,EAAe,MAAf,EAAuB,MAAvB,EAA+B,MAA/B,EAAuC,MAAvC,EAA+C,MAA/C,EAAuD,MAAvD,EAA+D,MAA/D,EAAuE,MAAvE,EAA+E,MAA/E,EAAuF,MAAvF,CAAjB;AACA,eAAKjB,EAAL,GAAQA,EAAR;AACA,eAAKkB,gBAAL,GAAwBjB,aAAakB,aAAb,EAAxB;AACA,eAAKlB,YAAL,GAAkBA,YAAlB;AACD;;;;6CAEkB;AAAA;;AACjB,gBAAI,CAAC,KAAKa,SAAL,CAAeM,OAApB,EAA6B;AAC3B,qBAAO,KAAKpB,EAAL,CAAQqB,IAAR,CAAa,EAAb,CAAP;AACD;AACD,gBAAIC,UAAU,KAAKR,SAAL,CAAeM,OAAf,CAAuBE,OAArC;AACA,gBAAIC,WAAWhB,EAAEiB,GAAF,CAAMF,OAAN,EAAe,UAACG,CAAD;AAAA,qBAAO,MAAKxB,YAAL,CAAkByB,UAAlB,CAA6B,EAACC,OAAOF,EAAEG,IAAV,EAA7B,CAAP;AAAA,aAAf,CAAf;AACA,mBAAO,KAAK5B,EAAL,CAAQqB,IAAR,CAAaE,QAAb,CAAP;AACD;;;sCAEW;AACV,gBAAID,UAAU,KAAKR,SAAL,CAAeM,OAAf,CAAuBE,OAArC;AACA,gBAAIO,SAAStB,EAAEuB,IAAF,CAAOR,OAAP,EAAgB,EAACM,MAAM,KAAKV,gBAAL,CAAsBS,KAA7B,EAAhB,CAAb;;AAEA,gBAAIE,MAAJ,EAAY;AACV,mBAAKb,KAAL,CAAWM,OAAX,CAAmBS,IAAnB,CAAwBF,MAAxB;AACA,mBAAKG,MAAL;AACD;;AAED,gBAAIC,aAAa,KAAKhC,YAAL,CAAkBkB,aAAlB,EAAjB;AACA,iBAAKD,gBAAL,CAAsBgB,IAAtB,GAA6BD,WAAWC,IAAxC;AACA,iBAAKhB,gBAAL,CAAsBS,KAAtB,GAA8BM,WAAWN,KAAzC;AACD;;;6CAEkB;AACjB,iBAAKX,KAAL,CAAWM,OAAX,GAAqB,EAArB;AACA,iBAAKU,MAAL;AACD;;;oCAEQ;AACP,iBAAKlB,SAAL,CAAeqB,gBAAf;AACD;;;mCAEQ;AACP,iBAAKrB,SAAL,CAAesB,YAAf;AACD;;;uCAEYP,M,EAAQ;AACnB,iBAAKb,KAAL,CAAWM,OAAX,GAAqBf,EAAE8B,OAAF,CAAU,KAAKrB,KAAL,CAAWM,OAArB,EAA8BO,MAA9B,CAArB;AACA,iBAAKf,SAAL,CAAesB,YAAf;AACD","file":"editor.js","sourcesContent":["import _ from 'lodash';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport angular from 'angular';\nimport kbn from 'app/core/utils/kbn';\n\n\nexport class TablePanelEditorCtrl {\n\n\n  /** @ngInject */\n  constructor($scope, $q, uiSegmentSrv) {\n    $scope.editor = this;\n    this.panelCtrl = $scope.ctrl;\n    this.panel = this.panelCtrl.panel;\n    this.fontSizes = ['80%', '90%', '100%', '110%', '120%', '130%', '150%', '160%', '180%', '200%', '220%', '250%'];\n    this.$q=$q;\n    this.addColumnSegment = uiSegmentSrv.newPlusButton();\n    this.uiSegmentSrv=uiSegmentSrv;\n  }\n\n  getColumnOptions() {\n    if (!this.panelCtrl.dataRaw) {\n      return this.$q.when([]);\n    }\n    var columns = this.panelCtrl.dataRaw.columns;\n    var segments = _.map(columns, (c) => this.uiSegmentSrv.newSegment({value: c.text}));\n    return this.$q.when(segments);\n  }\n\n  addColumn() {\n    var columns = this.panelCtrl.dataRaw.columns;\n    var column = _.find(columns, {text: this.addColumnSegment.value});\n\n    if (column) {\n      this.panel.columns.push(column);\n      this.render();\n    }\n\n    var plusButton = this.uiSegmentSrv.newPlusButton();\n    this.addColumnSegment.html = plusButton.html;\n    this.addColumnSegment.value = plusButton.value;\n  }\n\n  transformChanged() {\n    this.panel.columns = [];\n    this.render();\n  }\n  \n  refresh(){\n    this.panelCtrl.refreshTableData()\n  }\n\n  render() {\n    this.panelCtrl.refreshTable()\n  }\n\n  removeColumn(column) {\n    this.panel.columns = _.without(this.panel.columns, column);\n    this.panelCtrl.refreshTable();\n  }\n}\n\n/** @ngInject */\nexport function tablePanelEditor($q, uiSegmentSrv) {\n  'use strict';\n  return {\n    restrict: 'E',\n    scope: true,\n    templateUrl: 'public/plugins/finra-table/editor.html',\n    controller: TablePanelEditorCtrl\n  };\n}\n"]}